<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Xadrez Multiplayer</title>
    
    <!-- Estilos -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Bibliotecas JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="theme-madeira">

    <!-- Tela Inicial -->
    <div id="start-screen" class="modal">
        <div class="modal-content glass-panel">
            <h1 style="color: var(--primary-color);">Xadrez Online</h1>
            <p>Entre na sala para jogar contra algu√©m na mesma rede.</p>
            
            <input type="text" id="player-name-input" placeholder="Seu Apelido" maxlength="12">
            
            <div style="text-align: left; margin: 15px 0;">
                <label>Tema do Tabuleiro:</label>
                <select id="board-theme">
                    <option value="theme-madeira">Cl√°ssico (Madeira)</option>
                    <option value="theme-azul">Oceano (Azul)</option>
                    <option value="theme-verde">Floresta (Verde)</option>
                </select>
            </div>

            <button onclick="enterGame()" class="btn-primary">ENTRAR NO JOGO</button>
        </div>
    </div>

    <!-- √Årea do Jogo -->
    <div id="game-container" class="hidden">
        
        <!-- Notifica√ß√µes Flutuantes -->
        <div id="notification-area"></div>

        <!-- Lateral Esquerda (Oponente) -->
        <div class="sidebar">
            <div class="player-info">
                <h3>
                    <span class="online-indicator"></span> Oponente
                </h3>
                <div class="score-badge" id="score-p2">0</div>
                <div class="status-badge" id="status-p2">Aguardando...</div>
            </div>
            
            <div class="chart-container">
                <canvas id="advantageChart"></canvas>
            </div>
        </div>

        <!-- Tabuleiro -->
        <div id="board-wrapper">
            <div id="myBoard"></div>
        </div>

        <!-- Lateral Direita (Voc√™ e Infos) -->
        <div class="sidebar">
            <!-- Painel Din√¢mico: Status ou Ajuda -->
            <div class="player-info status-panel" id="info-box">
                <!-- Conte√∫do Padr√£o: Vez e Status -->
                <div id="default-status">
                    <h2 id="turn-display" style="color: var(--primary-color)">Brancas</h2>
                    <p id="game-status" style="font-size: 0.9rem;">Toque nas pe√ßas para ver op√ß√µes.</p>
                    
                    <div class="controls">
                        <button id="btn-flip" class="btn-secondary">üîÑ Virar Tabuleiro</button>
                        <button id="btn-reset" class="btn-secondary" style="border-color: var(--bad-color); color: var(--bad-color);">‚ö†Ô∏è Reiniciar</button>
                    </div>
                </div>

                <!-- Conte√∫do Din√¢mico: Ajuda da Pe√ßa -->
                <div id="piece-help" class="piece-help-content">
                    <h3 id="help-title">Pe√ßa</h3>
                    <div id="help-text">Descri√ß√£o...</div>
                    <button onclick="hideHelp()" class="btn-secondary" style="margin-top:10px; padding: 5px;">Voltar ao Jogo</button>
                </div>
            </div>

            <div class="player-info">
                <h3 id="my-name-display">Voc√™</h3>
                <div class="score-badge" id="score-p1">0</div>
                <div class="status-badge" id="status-p1">Neutro</div>
            </div>
        </div>
    </div>

    <!-- Modal de Vit√≥ria -->
    <div id="game-over-modal" class="modal hidden">
        <div class="modal-content glass-panel victory-panel">
            <div class="trophy-icon">üèÜ</div>
            <h1 id="victory-title">FIM DE JOGO</h1>
            <p id="victory-message" style="font-size: 1.2rem; margin: 20px 0;"></p>
            <button onclick="$('#game-over-modal').addClass('hidden')" class="btn-primary">Fechar</button>
        </div>
    </div>

    <!-- Modal de In√≠cio de Partida (Sorteio) -->
    <div id="start-game-modal" class="modal hidden">
        <div class="modal-content glass-panel" style="border-color: #fff; background: rgba(0,0,0,0.95);">
            <h2 style="color: var(--primary-color); text-transform: uppercase; letter-spacing: 2px;">Partida Iniciada</h2>
            <div style="margin: 20px 0;">
                <p style="font-size: 1.1rem; color: #ccc;">O sorteio definiu que voc√™ comandar√° as:</p>
                <div id="player-color-icon" style="font-size: 5rem; margin: 10px 0;"></div>
                <h1 id="player-color-text" style="font-size: 2.5rem; margin: 0;"></h1>
            </div>
            <p style="font-size: 0.9rem; color: #888;">Prepare sua estrat√©gia.</p>
            <button onclick="$('#start-game-modal').addClass('hidden')" class="btn-primary" style="margin-top: 20px;">√Ä Batalha!</button>
        </div>
    </div>

    <!-- L√≥gica do Jogo -->
    <script src="/static/js/main.js"></script>

</body>
</html>